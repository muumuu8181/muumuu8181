# Devin's Google Apps Script 開発ガイドライン

このガイドラインは、Devinが Google Apps Script (GAS) プロジェクトを開発する際の共通参照ドキュメントです。

## 🤖 Devin向け重要ポイント

### 1. 認証フローでの注意点
- 認証は必ずユーザーの介入が必要
- 認証関連のエラーメッセージは正常な動作の一部
- 複数の認証ステップが存在する可能性を常に考慮

### 2. 開発時の基本アプローチ
- プロジェクト作成前に必要な権限を確認
- エラーハンドリングを必ず実装
- ユーザーとの対話ポイントを明確に特定

### 3. デプロイ時のチェックポイント
- デプロイ設定は手動介入が必要
- 権限設定の確認が重要
- テスト実行による動作確認

## 📋 標準的な開発フロー

1. **プロジェクト初期設定**
   ```javascript
   // 基本的なGASプロジェクト構造
   function doGet() {
     return HtmlService.createHtmlOutput('Hello World');
   }
   ```

2. **認証フロー対応**
   - ユーザーに認証要求を送信
   - 認証完了を待機
   - 権限確認

3. **実装とテスト**
   - 基本機能の実装
   - エラーハンドリング追加
   - ローカルテスト実行

4. **デプロイ手順**
   - Webアプリとしてデプロイ
   - 権限設定の確認
   - 動作テスト実施

## ⚠️ よくある問題と対処法

1. **認証エラー**
   - 「このアプリは確認されていません」→ 正常な挙動
   - 権限不足エラー → ユーザーに追加認証を要求

2. **実行エラー**
   - タイムアウト → 処理の分割を検討
   - 権限エラー → スコープの確認

3. **デプロイエラー**
   - バージョン管理の問題 → 新規バージョン作成
   - 設定の不整合 → デプロイ設定の見直し

## 🔑 ユーザー介入が必要なポイント

1. **初期設定時**
   - Google アカウントへのログイン
   - プロジェクト作成の承認
   - スクリプトの初期認証

2. **開発プロセス中**
   - API有効化の承認
   - 追加の権限要求への対応
   - テスト実行の承認

3. **デプロイ時**
   - デプロイ設定の確認
   - アクセス権限の設定
   - 公開範囲の指定

## 📝 プロジェクト固有の設定

各プロジェクトのREADME.mdには以下を含める：
1. プロジェクト固有の設定や要件
2. 特別な認証要件
3. カスタム機能の説明
4. プロジェクト固有のトラブルシューティング

## 🔄 継続的な改善

このガイドラインは、新しい知見や課題に応じて更新されます。各プロジェクトでの経験を基に、以下を継続的に更新：
- よくある問題と解決策
- 効率的な開発手法
- ベストプラクティス

## 📚 参考リソース

- [Google Apps Script 公式ドキュメント](https://developers.google.com/apps-script)
- [Google Cloud Console](https://console.cloud.google.com/)
- [Apps Script Dashboard](https://script.google.com/home)

## 🆕 更新履歴

- 2024-01-24: 初版作成
  - 基本ガイドライン策定
  - Devin向け注意点追加
  - 標準的な開発フロー確立
